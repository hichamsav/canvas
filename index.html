<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="utf-8" />
  <title>Protected JS Demo</title>
</head>
<body>
  <h1>جاري تحميل الشفرة المشفرة…</h1>

<script>
  async function decryptAES(cipherBase64, keyStr) {
    const keyBytes = new TextEncoder().encode(keyStr);
    const key = await crypto.subtle.importKey(
      'raw', keyBytes, { name: 'AES-CBC' }, false, ['decrypt']
    );
    const data = Uint8Array.from(atob(cipherBase64), c => c.charCodeAt(0));
    const iv = data.slice(0, 16);
    const ct = data.slice(16);
    const plain = await crypto.subtle.decrypt({ name: 'AES-CBC', iv }, key, ct);
    return new TextDecoder().decode(plain);
  }

  (async () => {
    const cipherText = "أدخل_النص_المشفر_هنا";
    const key = "12345MySecretKey";

    console.log("Trying to decrypt...");

    try {
      const decryptedCode = await decryptAES(cipherText, key);
      console.log("Decrypted JavaScript:", decryptedCode.slice(0, 200) + '...');
      eval(decryptedCode);
    } catch (err) {
      console.error("Decryption failed:", err);
      document.body.innerHTML += "<p style='color:red;'>خطأ في فك التشفير—راجع Console.</p>";
    }
  })();
</script>
</body>
</html>

